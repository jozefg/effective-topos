\section{Notions of Completeness and Their Preservation Properties}\label{sec:completeness}

In this section we investigate two main questions. The first is how to
define completeness in the context of an internal category. In order
to provide a satisfactory answer, we will want this notion of
completeness to be preserved and reflected by $\family(-)$, so that we
can continue to work with fibrations. Next, we will need to see what
notions equivalences preserve completeness. In particular, many of our
categories will provide only a weak (but sufficient!) notion of
completeness and it is not obvious that it will be preserved by only
internal equivalences.

To begin with, internal categories, like normal categories, give us a
simplistic method of defining finite limits. For instance, products
may be defined as follows.
\begin{defn}\label{defn:completeness:products}
  An internal category $C$ is said to have products if
  $\Delta : C \to C \times C$ has a right adjoint.
\end{defn}
Similarly, the existence of equalizers can be defined by asserting the
existence of a right adjoint of the functor
$C \to C^{\rightrightarrows}$, the internal category of parallel
arrows. The reader may consult~\citet{Jacobs:99} for a more detailed
account of this in Chapter 7. This, moreover, can be seen to be the
right notion of finite limit for externalizations as well.
\begin{thm}\label{defn:completeness:finlimexternalization}
  $\family(C)$ has fiberwise finite limits if and only if $C$ has
  finite limits.
\end{thm}
\begin{proof}
  First let us suppose that $C$ has finite limits and attempt to show
  that $\family(C)$ has them. As is usual for proving the existence of
  finite limits, we simply prove that this property holds for products
  and equalizers.

  First products, suppose that $C$ has products. That is, we know that
  there is an internal functor $p : C \times C \to C$ so that there is
  an internal natural transformation $\eta : 1 \to p \circ \Delta$.
  That is, an external map $\eta : C_0 \to C_1$ sending each object
  $X$ to the diagonal map $X \to X \times X$ internally which
  satisfies the usual universal property; any internal map
  $A \to B \times C$ factors through $\eta_A : A \to A \times A$.

  We then suppose that we have $f, g : I \to C_0$ as objects in
  $\cat{Fam}_I(C)$. We want to show that
  $p_0 \circ \langle f, g \rangle$ is a product. That is, that for any
  $h$,
  \[
    \hom(h, f) \times (h, g) \cong \hom(h, p_0 \circ \langle f, g \rangle)
  \]
  However, since we're in a fiber, we know that $\hom(x, y)$ is
  precisely the same as a morphism $z : I \to C_1$ so that
  $x = \partial_0 \circ z$ and $y = \partial_1 \circ z$, or, put more
  concisely, we have that $z(i) : x(i) \to y(i)$. Therefore, let us
  take the map
  \[
    (x, y) \mapsto m \circ (\eta \partial_0 \circ \pi_1, p_1) \circ \langle x, y \rangle
  \]
  This just sends $x, y$ to $\langle x, y \rangle \circ \eta$
  essentially. We note that be the universal property and the fullness
  of $p$, we know that maps $h(i) \to f(i) \times g(i)$ are in
  bijection with pairs maps $h(i) \to f(i)$ and $h(i) \to g(i)$ as
  required. The case for equalizers is identical.

  We now turn to the reverse direction, suppose that $\family(C)$ has
  fiberwise products, we will show that this implies the existence of
  products in $C$. Suppose that $\family(C)$ has fiberwise limits. We
  wish to exhibit and adjoint $p : C \times C \to C$. First we define
  $p_0 : C_0 \times C_0 \to C_0$. This is done by noting that that we
  have a map $\hom(-, C_0) \times \hom(-, C_0) \to \hom(-, C_0)$
  sending $(f, g) \mapsto f \times g$. Moreover, this is natural
  because products are \emph{split} and reindexing is just
  precomposition. Thus, by Yoneda we have a map
  $p_0 : C_0 \times C_0 \to C_0$. Next we define
  $p_1 : C_1 \times C_1 \to C_1$ by an identical process since maps in
  a fiber of $\cat{Fam}_I(C)$ are equivalent to maps in
  $\hom(I, C_1)$. Furthermore, we have that
  $\partial_i \circ p_1 = p_0 \circ \partial_i$ since
  $y(\partial_i) \circ y(p_1) = y(p_0) \circ y(\partial_i)$ and $y$ is
  faithful. The conditions for $m$ and $i$ are equivalent and rely on
  properties of our natural transformations. It remains to show that
  $\Delta \dashv p$. For this, we must illustrate an
  $\eta : 1 \to p \circ \Delta$ which is appropriately universal. Let
  us consider the family unique map $X \to X \times X$ in
  $\cat{Fam}_{I}(C)$. This map is preserved by reindexing and so is
  natural in $I$. Additionally, this unique map has the type
  $I \to C_1$ and so by instantiating it at $I = C_0$ we get
  $\eta : C_0 \to C_1$ so that
  \[
    \partial_0 \circ \eta = 1 \qquad \partial_1 \circ \eta = p_0
  \]
  as required. Lastly we need to desired universal property. It
  suffices to show that the property holds for every $I$. Therefore,
  suppose that we have a map $f : I \to C_1$
  \[
    f(i) : X(i) \to p_0(A(i), B(i))
  \]
  We wish to show that we can factor $f$ through $\eta$, then the
  Yoneda lemma gives us our desired universality property. For this,
  we note that we have a map in the fiber $\cat{Fam}_I(C)$ between $X$
  and $p \circ \langle A, B \rangle$. By the property the universal
  property of products this factors map factors through
  $X \to p \circ \langle X, X \rangle$. However, we now that this is
  precisely equivalent to factoring through $\eta$ since the diagonal
  is preserved by reindexing.
\end{proof}
Often times the existence of such an adjoint is too strong a
condition. Working internally to a topos, another reasonable approach
would be to state the existence of a limit cone using the internal
language. That is for example,
\begin{defn}\label{defn:completeness:weakproducts}
  An internal category $C$ is said to have weak products if there is
  $Z$ has an epi onto $1$ where $Z$ is defined as
  \[
    Z \triangleq \forall a, b \in C_0.\ \exists c, \pi_1, \pi_2.
    \ \forall d.\ (\exists f_1 f_2.\ f_1 : d \to a \mathrel{\wedge} f_2 : d \to b) \implies
    \exists! g.\ g : c \to d \mathrel{\wedge} \pi_i \circ g = f_i\}
  \]
  Where the proposition
  $f : A \to B \triangleq \partial_0(f) = A \mathrel{\wedge} \partial_1(f) = B$.
\end{defn}
These definitions can be shown to coincide if and only if the topos
satisfies the axiom of choice\footnote{I'm 80\% sure at least} but
since the effective topos does not, we are then left with two
different notions of finite limits. The one based on the existence of
adjoints essentially asserts the global existence of a limit cone and
will be called the \emph{strong} notion of finite limits. The one
based on the internal language is implied by this and is called the
\emph{weak} or \emph{local} version of a finite limit.

We can take this idea to its natural completion and define (weak)
completeness for all small limits.
\begin{defn}\label{defn:complete:complete}
  An internal category $C$ is strongly complete if for all internal
  categories $D$ the diagonal functor $C \to C^D$ has a right
  adjoint.
\end{defn}
\begin{defn}\label{defn:complete:weakcompletebroken}
  An internal category $C$ is weakly complete if for all internal
  categories $D$ the formula specifying an adjoint to the the diagonal
  functor $C \to C^D$ specifies an object with an epi onto $1$.
\end{defn}
We now wish to check that this definition is useful, that is, that it
is preserved and reflected by equivalences. In order to do this, of
course, we must define a notion of equivalence. Again, there are two
reasonable notions. We can assert either the existence of a
pseudo-inverse globally, that is, in the ambient logic, or merely the
existence internally. The former notion is sufficient to determine an
equivalence relation, but the latter does not. It does not, for
instance, satisfy symmetry because of the potential difference between
internal and external existence. Therefore, we need to characterize
the completion of weak equivalences to an equivalence relation.
\begin{defn}\label{defn:complete:weakequivalence}
  Two internal categories, $C$ and $D$, are said to be weakly
  equivalent if there is an third internal category, $E$, so that
  there is a pair weak equivalences, $F : E \to C$ and $G : E \to
  D$. That is, a pair of functors which are internally full, faithful,
  and essentially surjective.
\end{defn}
We wish to generalize the notion of equivalences of internal
categories to equivalences of their fibrations so that we can work
with fibrations in later technical developments. This is done in two
steps, first of all
\begin{thm}\label{thm:complete:equivalencelifts}
  An equivalence of internal categories lifts to a fibered equivalence
  of their externalizations.
\end{thm}
\begin{proof}
\end{proof}
Weak equivalences are more difficult because there isn't a
corresponding notion of existential quantifier at in the metalogic
which corresponds to internal existence. In order to deal with this,
we draw inspiration from Kripke-Joyal semantics where $\exists$ is
modeled with a change of base.
\begin{thm}\label{thm:complete:weakequivalencelifts}
  $F : C \to D$ is a weak equivalence if and only if it lifts to
  $\family(F)$ so that $\family(F)$ is cartesian, full, faithful, and
  for any $X$ in $\cat{Fam}(D)$ there is a $Y \in \cat{Fam}(C)$ so
  that there is an epi $\alpha \in \hom(\family(F)(Y), X)$. so that
  $\alpha^*(X) \cong \family(F)(Y)$.
\end{thm}
\begin{proof}
  First we show that an internal functor lifts to a cartesian
  functor. First we note that $\family(F)$ can be defined as sending
  \[
    \begin{tikzcd}
      I\ar[d, "f"] \\
      C_0
    \end{tikzcd} \longrightarrow
    \begin{tikzcd}
      I\ar[d, "f"] \\
      C_0 \ar[d, "F_0"]\\
      D_0
    \end{tikzcd}
  \]
  The action on morphisms sends
  \[
    \begin{tikzcd}
      I \ar[dd, swap, "f"] \ar[rd, "h"] \ar[rr, "\alpha"] && J \ar[dd, "g"]\\
      & C_1 \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] &\\
      C_0 && C_0
    \end{tikzcd} \longrightarrow
    \begin{tikzcd}
      I \ar[d, swap, "f"] \ar[rd, "h"] \ar[rr, "\alpha"] && J \ar[d, "g"]\\
      C_0 \ar[dd, swap, "F_0"] &
      C_1 \ar[d, "F_1"] \ar[l, swap, "\partial_0"] \ar[r, "\partial_1"] &
      C_0 \ar[dd, "F_0"]\\
      & D_1 \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] &\\
      D_0 && D_0
    \end{tikzcd}
  \]
  We now need to show that this is a cartesian functor. A cartesian
  morphism in $\cat{Fam}(C)$ is one where the diagram of morphisms is
  actually a diagram of isomorphisms. That is, where we in fact have
  the situation
  \[
    \begin{tikzcd}
      I \ar[dd, swap, "f"] \ar[rd, "h"] \ar[rr, "\alpha"] && J \ar[dd, "g"]\\
      & \isos(C) \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] &\\
      C_0 && C_0
    \end{tikzcd}
  \]
  It thus suffices to show that $F_1$ restricts to a map
  $\isos(C) \to \isos(D)$ by the above diagram. This however holds
  because, permitting the internal argument,
  \begin{align*}
    \exists f^{-1}.\ m(f, f^{-1}) = i
    &\iff \exists f^{-1}.\ F_1(m(f, f^{-1})) = i\\
    &\iff \exists f^{-1}.\ m(F_1(f), F(f^{-1})) = i\\
    &\iff \exists f^{-1}.\ m(F_1(f), f^{-1}) = i
  \end{align*}
  Now that we have that $\family(F)$ is cartesian we turn to showing
  that it is faithful if and only if $F$ is. We note that $F$ being
  faithful is equivalent to $F_1$ being a monomorphism which precisely
  tells us that $\family(F)$ is faithful. For the reverse, suppose
  that $\family(F)$ is faithful. Then we wish to show that $F_1$ is a
  mono. We do have that $F_1^* : \hom(-, C_1) \to \hom(-, F_1)$ is a
  faithful functor which is precisely what we need.

  Faithfulness and essential surjectivity are proven in identical ways
  so we focus here on essential surjectivity. Suppose that the formula
  $\forall Y \in D_0.\ \exists X \in C_0.\ F(X) \cong Y$ holds, we
  wish to show that $F$ is internally essentially surjective if and
  only if for any $Y \in \cat{Fam}(D)$ there is an epi $\alpha$ and an
  $X \in \cat{Fam}{C}$ so that $\family(F)(X) \cong \alpha^*(Y)$.
  First the forward direction, suppose that we have a family
  $y : Y \to D_0$. Then, by expanding the definition of ``$F$ is
  internally essentially surjective'' we have that there is an epi
  $\alpha : Z \epi Y$ so that there is a $p : Z \to C_0$ and
  $q : Z \to \isos(D)$ so that $\partial_0 \circ q = F_0 \circ p$ and
  $\partial_1 \circ q = y \circ \alpha$. We now need to show that
  $\family(F)(p) \cong \alpha^*(y)$. However, this follows from the
  commutativity of the diagram
  \[
    \begin{tikzcd}
      Z \ar[rr, equals] \ar[d, swap, "p"] \ar[dr, "q"] && Z \ar[d, twoheadrightarrow, "\alpha"]\\
      C_0 \ar[d, swap, "F_0"] & \isos(D) \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] & Y \ar[d, "y"]\\
      D_0 && D_0
    \end{tikzcd}
  \]
  For the reverse, suppose instead that for any $y : Y \to D_0$ we had
  an $\alpha$, $p$ and $q$ so that the following diagram commutes.
  \[
    \begin{tikzcd}
      Z \ar[rr, equals] \ar[d, swap, "p"] \ar[dr, "q"] && Z \ar[d, twoheadrightarrow, "\alpha"]\\
      C_0 \ar[d, swap, "F_0"] & \isos(D) \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] & Y \ar[d, "y"]\\
      D_0 && D_0
    \end{tikzcd}
  \]
  We now wish to show that
  $Y \Vdash \exists X.\ \exists f : \isos(C).\ f : X \to y$ holds in
  the internal logic. By the Kripke-Joyal semantics it suffices to
  show that there is a global element of $x : Z \to C_0$ and
  $f : Z \to \isos(D)$ so that $\partial_0 \circ f = x$ and
  $\partial_1 \circ f = y \circ \alpha$. This precisely what we
  supposed however, picking $x = p$ and $f = q$ so we're done.
\end{proof}
\begin{defn}\label{defn:complete:weakequivalencefib}
  A pair of fibrations, $P$ and $Q$, are said to be weakly equivalent
  when there is a third fibration $V$ so that there are weak
  equivalences $V \to P$ and $V \to Q$.

  A weak equivalence is a Cartesian morphism which is full, faithful,
  and for any $X$ in $\cat{Fam}(D)$ there is a $Y \in \cat{Fam}(C)$ so
  that there is an epi $\alpha \in \hom(\family(F)(Y), X)$. so that
  $\alpha^*(X) \cong \family(F)(Y)$.
\end{defn}
Now we turn to the fatal flaw in
Definition~\ref{defn:complete:weakcompletebroken}.
\begin{thm}\label{thm:complete:weakcompletenotpreserved}
  Weak completeness is not preserved by weak equivalences.
\end{thm}
\begin{proof}
  Suppose that we have $C$ weakly equivalent to $C'$ both being
  internal discrete categories and that $C$ is weakly complete, we
  wish to demonstrate that $C$ needn't be weakly complete. Since
  $C \simeq C'$, we have an internal functor $C \to C'$, $F$, and
  since it's an equivalence it's internally full, faithful and
  essentially surjective. Fullness and faithfulness are trivial in
  this case because $C$ and $C'$ are discrete categories. Moreover,
  since $C$ and $C'$ are discrete, we know that
  $\isos(C) \cong \Delta$ in the slice over $C \times C$. Therefore,
  being essentially surjective is really equivalent to $F_0$ being an
  epi so we have $C_0 \epi C'_0$.

  Suppose now that we have a diagram $C^D$ formed by a discrete
  category $D$. This in turn tells us that $C^D$ and $C'^D$ are both
  discrete. However, there is no equivalence $C^D \simeq C'^D$ since
  we needn't have an epi $C_0^{D_0} \epi C_0'^{D_0}$. This means that
  given a diagram on $C'$, we cannot necessarily transfer it to a
  diagram on $C$ to calculate a limit. We can only do this when $D$ is
  internally projective.
\end{proof}
This is a major issue, in category theory it is after all a cardinal
sin to not be preserved by isomorphism or equivalence. In this case,
we are in trouble because we will wish to establish the completeness
of one internal category and transfer this to more convenient
categories for semantics. In order to handle this, we will strengthen
our notion of weak completeness to \emph{indexed} diagrams. An indexed
diagram is given in the usual category theoretic style, as a functor
from an internal category in $D/I$ into $I^*(C)$. Therefore, our
definition of (weak) completeness is simply that an internal category
is (weakly) complete by the previous definition in each slice.
\begin{thm}\label{thm:complete:preservation}
  The following hold
  \begin{enumerate}
  \item Strong equivalences preserve and reflect both strong and weak
    completeness
  \item Weak equivalences preserve and reflect weak completeness
  \end{enumerate}
\end{thm}
\begin{proof}
  As we are only making use of weak completeness in this note, I will
  only prove the second point. We wish to show that weak equivalences
  preserve and reflect weak completeness.

  First, reflection so we suppose we have $F : C \simeq C'$ and $C'$
  being complete. Suppose we have a diagram $d : D \to I^*(C)$. We can
  trivially extend this to a diagram $I^*(F) \circ d : D \to I^*(C')$.
  By assumption, there is an internal limit of this diagram so there
  is a $\alpha : u \epi 1$ so that $p : u \to I^*(C_0')$ exists and is
  a limit for $I^*(F) \circ d$. Now, since $F$ is essentially
  surjective, there is a $\beta : v \epi u$ so that
  $q : v \to I^*(C_0)$ exists and there is an $f : v \to I^*(C_1')$ so
  that $f$ is an isomorphism between $I^*(F_0) \circ q$ and
  $p \circ \beta$. It is then a simple matter to check that $q$ is our
  desired limit for $d$. It follows from the fact that any cone over
  $d$ in $I^*(C)$ can be mapped to a cone in $I^*(C')$ and the unique
  map from this cone to $q$ can be lifted to $C$ by the fullness and
  faithfulness of $F$.

  For preservation, suppose that $F : C \simeq C'$ and that $C$ is
  complete. We need to show that $C'$ is as well. For this, suppose
  that we have a diagram $d : D \to I^*(C')$. By taking the iso-comma
  square formed by $d$ and $I^*(F)$, we end up with a diagram on
  $I^*(C)$. The limit of this diagram is must exist internally by
  assumption and it is trivial to check that it is mapped to a limit
  of $d$ by $I^*(F)$. Notice that it is vital that we are working in
  the slice category so that we can make use of the iso-comma square
  in order to construct a diagram on $I^*(C)$ from one on $I^*(C')$.
\end{proof}
As a final observation, this notion of completeness has a pleasant
characterization at the level of fibrations.
\begin{defn}\label{defn:complete:completefibration}
  \begin{itemize}
  \item $C$ is complete if $\family(C)$ has fiberwise finite limits and a
    right adjoint to reindexing. Moreover, both of these are preserved
    by reindexing.
  \item $C$ is weakly complete if $\family(C)$ if given a finite
    diagram in the fiber over $I$, there is a $K \epi I$ so that the
    reindexing of the diagram has a limit over $K$. Similarly, for
    each $u : I \to J$ there is a $e : J \epi K$ so that $(eu)^*$ has
    a right adjoint. Furthermore, reindexing preserves all finite
    limits and indexed products when they exist.
  \end{itemize}
\end{defn}
Like any good categorical definition, we shall expect completeness and
weak completeness to be preserved by equivalences. This, despite what
is claimed in the original paper, appears to not be the case for weak
equivalence and weak completeness. Instead, it seems necessary to work
with pre-stacks (over the regular topology) rather than
fibrations. These are fibrations which allow us to partially recover a
fiber from a collection of fibers which cover it. This is reminiscent
of the way that a separate presheaf, $S$, allows the partial recover
of $S(X)$ from $(S(X_i))_{i \in I}$ for a covering family $I$. Thus we
must make a slight detour into descent theory before we proceed. Since
I am unfamiliar with the general theory and we do not need it, we
shall not deal with stacks and pre-stacks in generality. The curious
reader is referred to~\citet{Vistoli:04} or~\citet{Frey:14} the latter
of which avoids descent theory in its full generality.

Before proceeding, let us consider where the naive proposition we wish
to prove becomes stuck.
\begin{prop}\label{prop:complete:completefibrationbroken}
  (Weak) equivalences of fibration preserve (weak) completeness.
\end{prop}
\begin{proof}
  \renewcommand{\qed}{\hfill \color{red}{\large \textsf{X}}}
  Again we shall only prove this for weak completeness and
  equivalences because our final result will involve the weak
  completeness of an internal category. In order to do this, we must
  show that a weak equivalence preserves and reflects weak
  completeness because,
  Definition~\ref{defn:complete:weakequivalencefib} requires
  equivalences heading in both directions.

  Suppose we have a weak equivalence $F : P \to Q$ between the
  fibrations $P$ and $Q$. First, we wish to show that if $P$ is weakly
  complete then so is $Q$. Suppose we have a finite diagram,
  $d : D \to Q^J$ in $Q$ in the fiber above $J$, since it is finite
  there is an object $I$ with an epimorphism $\alpha : I \epi J$ so
  that reindexing all of $d$ along $\alpha$ we have that
  $\alpha^* \circ d \cong F \circ e$ where $e$ is a diagram
  $D' \to P^I$. By weak completeness of $P$ we can find a
  $\beta : K \epi I$ so that there is a limit of $\beta^* \circ e$,
  let us call it $X$. I then claim that there is a limit for
  $(\alpha\beta)^* \circ d$ in $Q$, namely $F(X)$. Suppose that we had
  a cone for $(\alpha\beta)^* \circ d$, $Y$, in $Q^K$, we need to
  exhibit a unique morphism from $Y$ to $F(X)$. Then by our equivalent
  of fullness and essential surjectivity, there is a
  $\gamma : L \epi K$ and a $Z$ so that $\gamma^*(Y) \cong F(Z)$ and
  the cone for $Y$ can be lifted to a cone on $Z$. This gives us a
  unique morphism from $Z \to \gamma^*(X)$ in $P^L$ since reindexing
  preserves finite limits in $P$. Therefore, there is a unique
  morphism from
  $\gamma^*(Y) \cong F(Z) \to F(\gamma^*(X)) \cong \gamma^*(F(X))$
  (the latter isomorphism following from the fact that $F$ is
  cartesian). But now I'm stuck, I don't have that $\gamma^*$ is full
  because $\gamma$ is epi, not split epi and nothing has been assumed
  allowing us to move from $Q^L$ to $Q^K$.
\end{proof}
\renewcommand{\qed}{\hfill\ensuremath{\Box}}

What is needed is to impose a condition on our fibrations allowing us
to \emph{descend} from one fiber to another. Consider a family of
morphisms, $(f_x : J_x \to I)_{x \in X}$ in $\Ccat$. Given a fibration
$p : \Dcat \to \Ccat$, we can define what's called a \emph{descent
  datum}.
\begin{defn}\label{defn:complete:descentdatum}
  A descent datum for $(f_x : J_x \to I)_{x \in X}$ for $p$ is a
  family of objects $A_x$ and a collection of isomorphisms
  $\gamma_{x, y}$ so that
  $\gamma_{xy} : y_{xy}^*(A_x) \cong z_{xy}^*(A_y)$ where $y_{xy}$ and
  $z_{xy}$ are given by the pullback of $f_y$ along $f_x$.

  Moreover, we require that the family of isomorphisms are compatible
  with one another. That is, that the satisfy the conditions
  \begin{enumerate}
  \item The given the unique map $d_x : J_x \to J_x \times_I J_x$
    induced by the diagonal we have
    $d_x^*(y_{xx}^* A_x) \cong A_x \cong d_x^*(z_{xx}^*(A_x))$.
  \item If we form the triple pullback $J_x \times_I J_y \times_I J_z$
    with $\pi_{xy} : J_x \times_I J_y \times_I J_z \to J_x \times_I J_y$
    and similarly $\pi_{xz}$ and $\pi_{yz}$ then
    \[
      \begin{tikzcd}
        \pi_{xy}^*(y^*_{xy}(A_x)) \ar[d] \ar[r, "\pi_{xy}^*(\gamma_{xy})"] &
        \pi_{xy}^*(z^*_{xy}(A_y)) \ar[r] &
        \pi_{yz}^*(z^*_{yz}(A_y)) \ar[d, "\pi_{yz}^*(\gamma_{yz})"]\\
        \pi_{xz}^*(y^*_{xz}(A_x)) \ar[r, swap, "\pi_{xz}^*(\gamma_{xz})"] &
        \pi_{xz}^*(z^*_{xz}(A_z)) \ar[r] &
        \pi_{yz}^*(z_{yz}^*(A_z))
      \end{tikzcd}
    \]
    commutes.
  \end{enumerate}

  A morphism between descent datums is a family of morphisms
  $(h_x)_{x \in X} : (A_x, \gamma_{xy}) \to (B_x, \rho_{xy})$ so that
  \[
    \begin{tikzcd}
      y_{xy}^*(A_x) \ar[r, "\gamma_{xy}"] \ar[d, swap, "y_{xy}^*(h_x)"] &
      z_{xy}^*(A_y) \ar[d, "z_{xy}^*(h_y)"]\\
      y_{xy}^*(B_x) \ar[r, swap, "\rho_{xy}"] & z_{xy}^*(B_y)\\
    \end{tikzcd}
  \]
\end{defn}
All told, this gives us an obvious category
$\desc(\Dcat, (f_x)_{x \in X})$. In an analogy with sheaves, we may
think of these descent datums as matching families for a ``presheaf of
categories''. Just as we can induce a matching family from an element
of the sheaf at $I$, we can induce a descent datum from an object in
the fiber above $I$.
\begin{lem}
  For any object $A$ in the fiber of $p$ above $I$,
  $((f_x^*(A))_{x \in X}, \gamma_{xy})$ forms a descent datum where
  $\gamma_{xy}$ is the witness for
  $z_{xy}^* \circ f_y^* \cong y_{xy}^* \circ f_x^*$.

  Furthermore, vertical morphisms introduce morphisms between descent
  datums.
\end{lem}
\begin{proof}
  The checks that these isomorphisms are coherent are trivial. In
  order to construct a morphism between these induced descent datums
  we simply pull back the original morphism along $f_x$ for each
  $x$. The result obviously satisfies the required commutation
  property.
\end{proof}
Let us denote this induced datum by $\phi_f(A)$. It is easy to check
that $\phi_f$ in fact induces a functor mapping $p^I$ to
$\desc(\Dcat, (f_x)_{x \in X})$. This raises a question, again by
analogy with sheaves. When does a descent datum arise from $\phi$?
Since we are working with categories now instead of merely sets of
objects, we are entitled to ask to whether all the morphisms between
$\phi_f(A)$ and $\phi_f(B)$ arise uniquely from $\phi_f$ as well. That
is, when is $\phi_f$ full and faithful?
\begin{defn}
  We shall call a fibration $p$ a stack for a Grothendieck topology
  $\mathcal{J}$ when $\phi_S$ is an equivalence for all
  $S \in \mathcal{J}$ and $p$ is a prestack when $\phi_S$ is full and
  faithful for all $S \in \mathcal{J}$.
\end{defn}
Intuitively, a stack gives us the ability to reconstruct an element of
$p^I$ when we have a scattered collection of objects in $p^{J_x}$
which look as though they ought to fit together. A prestack gives us
the ability to do the same, but for vertical morphisms between two
objects in $p^I$.

We restrict our attention to the so called ``regular topology''. In
this case we work only with singleton families $f$ instead of jointly
epimorphic families. In this case we only need on object and one
isomorphism for each descent datum, $A$ and
$\iota : \pi_0^*(A) \cong \pi_1^*(A)$. What is particularly useful to
us is that all the fibrations we want to work with form prestacks for
this topology.
\begin{thm}
  For an internal category $C$, $\cat{Fam}(C)$ is a pre-stack.
\end{thm}
\begin{proof}
  What we must show is that for all $\alpha : J \epi I$ that
  $\Phi_\alpha$ is full and faithful. To do this, suppose that we have
  two objects in $A, B \in \cat{Fam}(C)^I$, these give rise to two
  descent datums $(\alpha^*(A), \iota_A)$ and $(\alpha^*(B), \iota_B)$
  where $\iota$ is the natural isomorphisms
  $\iota : p^*\alpha^* \cong q^*\alpha^*$ and $p, q$ is the kernel
  pair of $\alpha$. Suppose we have a morphism between the descent
  datums, that is, a morphism $f : \alpha^*(A) \to \alpha^*(B)$ which
  satisfies $\iota_B \circ p^*(f) = q^*(f) \circ \iota_A$. We must
  show that there is a $g$ so that $\alpha^*(g) = f$.

  First, as a visualization of $f : \alpha^*(A) \to \alpha^*(B)$ we
  have the commutative diagram
  \[
    \begin{tikzcd}
      J \ar[d, swap, twoheadrightarrow, "\alpha"] \ar[rd, "f_0"] \ar[rr, equals] && J \ar[d, twoheadrightarrow, "\alpha"]\\
      I \ar[d, swap, "A"] & C_1 \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] & I \ar[d, "B"]\\
      C_0 && C_0
    \end{tikzcd}
  \]
  We would like to show that we can rewrite this diagram as
  \[
    \begin{tikzcd}
      J \ar[d, swap, twoheadrightarrow, "\alpha"] \ar[rr, equals] && J \ar[d, twoheadrightarrow, "\alpha"]\\
      I \ar[dd, swap, "A"] \ar[rr, equals] \ar[dr, "g_0"]  & & I \ar[dd, "B"]\\
      & C_1 \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] &\\
      C_0 && C_0
    \end{tikzcd}
  \]
  So that $f_0 = g_0 \circ \alpha$ and the top square is a
  pullback. The first bit is obvious so we merely turn to constructing
  this $g_0$. The commutative square we have for $f$ gives us that
  \[
    m \circ \langle (\iota_B)_0, f_0 \circ q \circ (\iota_B)_1 \rangle =
    m \circ \langle f_0 \circ p, (\iota_A)_0 \rangle
  \]
  In order to construct $g_0$, we also note that $\alpha$ is
  coequalizes by its kernel pair (as $\eff$ is a topos). Therefore, it
  suffices to show that $f_0 \circ p = f_0 \circ q$ in order to get a
  factorization of $f_0$ through $\alpha$. But this follows
  immediately from our assumption since the fact that $(\iota_A)_0$ is
  an isomorphism gives us that
  \[
    (\iota_B)_0 \odot (f_0 \circ q \circ (\iota_B)_1) \odot (\iota_A)_0^{-1} = f_0 \circ p
  \]
  Here we are using $\odot$ as notation for internal composition. But
  we know that $\iota_0$ forms an internal natural transformation so
  we may rewrite the right-hand side to
  \[
    f_0 \circ q \circ (\iota_B)_1 = f_0 \circ p
  \]
  Finally, however, we note that since $\iota_B$ is vertical we must
  have that $(\iota_B)_1 = 1$ so this gives us that
  \[
    f_0 \circ q = f_0 \circ p
  \]
  holds as required so we get the desired factorization of $f_0$.

  This gives us that the functor is full, faithful is a trivial
  consequence of the fact that $\alpha$ is epi.
\end{proof}
\begin{thm}
  The fundamental fibration is a stack relative to the regular topology.
\end{thm}
\begin{proof}
  In order to show this, suppose that we have a descent datum
  $(A, \alpha)$ for the regular epi $f : I \epi J$, we must show that
  $(A, \alpha)$ is actually essentially image of $B$ under $f^*$ for
  some $B$ above $J$.

  This means showing that we can construct the following pullback
  square for some $B$
  \[
    \begin{tikzcd}
      X \ar[d, swap, "A"] \ar[r] & Y \ar[d, "B"]\\
      I \ar[r, twoheadrightarrow, "f"] & J
    \end{tikzcd}
  \]
  We know that $f$ is coequalized by its kernel pair as it is regular.
  Call this kernel pair $p$ and $q$. First, we note that we have an
  equivalence relation on $A$ defined by the two morphisms $A^*(p)$
  and $A^*(q) \circ \alpha$. Let us denote the domain of $A^*(p)$ as
  $Z$ and the domain of $A^*(q)$ as $W$. In diagram form, our
  equivalence relation are the two maps on top where each square is a
  pullback.
  \[
    \begin{tikzcd}
      Z \ar[r, "A^*(p)"] \ar[d, swap, "p^*(A)"] &
      X \ar[d, "A"] &
      W \ar[l, swap, "A^*(q)"] \ar[d, swap, "q^*(A)"] &
      Z \ar[l, swap, "\alpha"] \ar[dl]\\
      {I \times_J I} \ar[r, swap, "p"] &
      I &
      {I \times_J I} \ar[l, "q"]
    \end{tikzcd}
  \]
  In order to show this is reflexive, we want to show that
  $\Delta : A \to A \times A$ factors through
  $R = \langle A^*(p), A^*(q) \circ \alpha \rangle$ in the fiber of
  $I$. First we note that $R$ is defined by the universal property of
  $X \times_I X$.
  \[
    \begin{tikzcd}
      Z \ar[ddr, bend right, swap, "A^*(p)"]
      \ar[drr, bend left, "A^*(q) \circ \alpha"]
      \ar[dr, dashed, "R"] &&\\
      &X \times_I X \ar[r] \ar[d] & X \ar[d, "A"]\\
      &X \ar[r, swap, "A"] & I
    \end{tikzcd}
  \]
  Now we wish to exhibit
  \[
    \begin{tikzcd}
      Z \ar[rr, bend left, "A^*(p)"] \ar[rr, bend right, "A^*(q) \circ \alpha"] \ar[dr, swap, "p \circ p^*(A)"]
      && X \ar[dl, "A"] \ar[ll, dashed]\\
      & I &
    \end{tikzcd}
  \]
  In order to exhibit this arrow, let us construct make use of the
  fact that $\Delta^* \circ \pi_1^* \cong 1$ so it suffices to show
  that
  \[
    \begin{tikzcd}
      (\pi_1 \circ \Delta)^*(Z)
      \ar[rrrr, bend left, "(\pi_1 \circ \Delta)^*(A^*(p))"]
      \ar[rrrr, bend right, "(\pi_1 \circ \Delta)^*(A^*(q) \circ \alpha)"]
      \ar[ddrr, swap, "(\pi_1 \circ \Delta)^*(p \circ p^*(A))"]
      &&&& X \ar[ddll, "(\pi_1 \circ \Delta)^*(A)"] \ar[llll, dashed]\\
      &&&&\\
      && I &&
    \end{tikzcd}
  \]
  But now we note that
  $(\pi_1 \circ \Delta)^*(A^*(q) \circ \alpha) = (\pi_1 \circ
  \Delta)^*(A^*(q))$ by the unit law. Thus we only need to show that
  \[
    \begin{tikzcd}
      (\pi_1 \circ \Delta)^*(Z)
      \ar[rrrr, bend left, "(\pi_1 \circ \Delta)^*(A^*(p))"]
      \ar[rrrr, bend right, "(\pi_1 \circ \Delta)^*(A^*(q))"]
      \ar[ddrr, swap, "(\pi_1 \circ \Delta)^*(p \circ p^*(A))"]
      &&&& X \ar[ddll, "(\pi_1 \circ \Delta)^*(A)"] \ar[llll, dashed]\\
      &&&&\\
      && I &&
    \end{tikzcd}
  \]
  However this in turn follows immediately from the fact that there is
  a common splitting of $p, q$ since it a kernel pair. Next we
  consider showing that this relation is symmetric. This means that we
  wish to find a morphism $s$ so that
  $A^*(q) \circ \alpha \circ s = A^*(p)$ and
  $A^*(p) \circ s = A^*(q) \circ \alpha$.


  First we make a
  basic observation about $p$ and $q$: since they're a kernel pair
  they form a symmetric relation. Therefore, we have a morphism
  \[
    \begin{tikzcd}
      I \times_J I \ar[dr, swap, "{\langle q, p \rangle}"] \ar[rr, "x"] &&
      I \times_J I \ar[dl, "{\langle p, q \rangle}"]\\
      & I \times I &
    \end{tikzcd}
  \]
  This in turn tells us that $p \circ x = q$ and $q \circ x = p$. Thus
  we may conclude that $x_1 = A^*(x)$ is a map $A^*(p)$ to $A^*(q)$
  when $x$ is viewed as a morphism between $p$ and $q$ and
  $x_2 = A^*(x)$ is a map from $A^*(q)$ to $A^*(p)$ when $x$ is viewed
  as a morphism between $q$ and $p$. Then however, we have that
  $x_2 \circ \alpha$ is a morphism between $A^*(q) \circ \alpha$ and
  $A^*(p)$. If we can then show that the following we'd be done.
  \[
    A^*(q) \circ \alpha \circ x_2 \circ \alpha = A^*(p)
  \]
  In order to do this, we merely need to show that
  $\alpha \circ x_2 \circ \alpha = x_1$. Since $x_1$ is induced by a
  universal property of a pullback, what we need to show is that
  \begin{align*}
    q^*(A) \circ \alpha \circ x_2 \circ \alpha &= x \circ p^*(A)\\
    A \circ A^*(q) \circ \alpha \circ x_2 \circ \alpha &= A \circ A^*(p)
  \end{align*}
  We can rewrite this first equation to showing that
  \[
    q^*(A) \circ \alpha \circ x_2 \circ \alpha =
    p^*(A) \circ x_2 \circ \alpha =
    x \circ q^*(A) \circ \alpha =
    x \circ p^*(A)
  \]
  For the second equation
  \[
    A \circ A^*(q) \circ \alpha \circ x_2 \circ \alpha =
    q \circ q^*(A) \circ \alpha \circ x_2 \circ \alpha =
    q \circ x \circ p^*(A) =
    p \circ p^*(A) =
    A \circ A^*(p)
  \]
  So this relation is indeed symmetric. Finally we turn to the
  question of showing this relationship to be transitive. In order to
  elaborate what this condition means let us form the following
  pullback.
  \[
    \begin{tikzcd}
      Y \ar[d, swap, "y_1"] \ar[r, "y_2"] & Z \ar[d, "A^*(p)"]\\
      Z \ar[r, swap, "A^*(q) \circ \alpha"] & X
    \end{tikzcd}
  \]
  Transitivity means that we must show
  \[
    \begin{tikzcd}
      Y \ar[dr, swap, "{\langle A^*(p) \circ y_1, A^*(q) \circ \alpha \circ y_2 \rangle}"] \ar[rr, dashed] &&
      Z \ar[dl, "{\langle A^*(p), A^*(q) \circ \alpha \rangle}"]\\
      & X \times X &
    \end{tikzcd}
  \]
  Therefore, we need an $x$ so that
  $A^*(p) \circ x = A^*(p) \circ y_1$ and
  $A^*(q) \circ \alpha \circ x = A^*(q) \circ \alpha \circ y_2$. We
  note that as a kernel pair we of course have that $p$ and $q$ are
  transitive. That is, given the pullback
  \[
    \begin{tikzcd}
      K \ar[r, "\pi_2"] \ar[d, swap, "\pi_1"] & I \times_J I \ar[d, "p"]\\
      I \times_J I \ar[r, swap, "q"] & I
    \end{tikzcd}
  \]
  We have that there is a morphism $k$ so that
  $p \circ \pi_1 = p \circ k$ and $q \circ \pi_2 = q \circ k$. We note
  that by definition we have that $K$ is the product of $p$ and
  $q$. Therefore, this diagram is preserved by $A^*$ and we have
  $A^*(p) \circ \pi_1 = A^*(p) \circ A^*(k)$ and
  $A^*(q) \circ \pi_2 = A^*(q) \circ A^*(k)$. Next, we observe that
  $A^*(K)$ is in fact the meet of $A^*(p)$ and $A^*(q) \circ \alpha$
  since $\alpha$ is an isomorphism. We therefore just need to show
  that
  \[
    A^*(q) \circ \alpha \circ \alpha^{-1} \circ \pi_2 =
    A^*(q) \circ \alpha \circ \alpha^{-1} \circ  \circ A^*(k)
  \]
  but this is immediate. Therefore we have a valid equivalence relation.
\end{proof}

\begin{thm}\label{thm:complete:completeexternalization}
  An internal category $C$ is weakly complete if and only if its
  externalization is.
\end{thm}
\begin{proof}

\end{proof}
At this point we have developed all the theory that we need to being
our investigation of what small complete categories exist in the
effective topos.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
