\documentclass[12pt]{amsart}
\usepackage{fullpage, microtype}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{natbib, hyperref}
\usepackage{tikz-cd}
\usepackage{xcolor}

\newcommand{\todo}[1]{{\color{red}{\LARGE #1}}}

\newcommand{\cat}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\topos}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\set}{\cat{Set}}
\newcommand{\eff}{\mathcal{E}\!f\!f}

\renewcommand{\epsilon}{\varepsilon}
\newcommand{\pto}[1]{\rightharpoonup}
\newcommand{\den}[1]{\llbracket #1 \rrbracket}
\newcommand{\Ccat}{\ensuremath{\mathbb{C}}}
\newcommand{\Dcat}{\ensuremath{\mathbb{D}}}
\newcommand{\Etop}{\ensuremath{\mathcal{E}}}
\newcommand{\Ftop}{\ensuremath{\mathcal{F}}}
\newcommand{\pow}[1]{\ensuremath{\mathcal{P}\left(#1\right)}}
\newcommand{\card}[1]{\ensuremath{\left\vert#1\right\vert}}
\newcommand{\powfin}[1]{\ensuremath{\mathcal{P}_{fin}\left(#1\right)}}

\newcommand{\epi}{\ensuremath{\twoheadrightarrow}}
\newcommand{\mono}{\ensuremath{\rightarrowtail}}
\newcommand{\im}[1]{\ensuremath{\mathrm{Im}(#1)}}
\DeclareMathOperator{\charmap}{char}
\DeclareMathOperator{\true}{true}
\DeclareMathOperator{\sub}{Sub}
\DeclareMathOperator{\dom}{Dom}
\DeclareMathOperator{\cod}{Cod}
\DeclareMathOperator{\full}{Full}

\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{remark}[thm]{Remark}
\newtheorem{example}[thm]{Example}
\newtheorem{defn}[thm]{Definition}

\title{Small Complete Categories in the Effective Topos}
\author{Daniel Gratzer}
\date{\today}
\begin{document}
\maketitle

\section{Introduction}\label{sec:introduction}

In this note I'd like to discuss a remarkable discovery of the 1970s:
the existence of small, complete, non-poset internal categories in the
effective topos. This is a surprising discovery not because these
subcategories are particularly exotic; in fact they are quite
natural. What makes this surprising is that no Grothendieck topos
(importantly $\set$) can contain such an internal category. Therefore,
it is a direct result of the nonclassical metatheory that $\eff$
provides that we can construct such internal categories.

These categories are in fact interesting for reasons beyond their mere
existence. They provide a method for describing naive semantics for
type theories with impredicative polymorphism, notably System F, which
would otherwise be impossible to describe. In essence, the
completeness of the internal category means that $\forall$ may be
simply interpreted as the product over the object of objects,
something that's in fact contained in the internal category since it's
closed under such limits. A more detailed description of the semantics
of System F that this provides is a subject for a future note however.

In this note we will mainly be concerned with establishing the minimum
complete theory in order to describe the internal categories of
interest and prove their completeness. This is nontrivial since even
stating what completeness is requires a fair amount of delicate
consideration. In section~\ref{sec:freyd} we will start by proving
that this work is in fact worth it; these categories don't exist in
$\set$. In sections~\ref{sec:completeness} and~\ref{sec:completeness}
some of the underlying theory behind our constructions, including a
discussion on why the right notion of subcategory to consider is in
fact, an internal category. Finally, the main thrust of the note is
developed in sections~\ref{sec:orth} and~\ref{sec:modest} where we
prove the existence of two such internal categories, the category of
objects orthogonal two $\Omega$ and the category of so-called
\emph{modest sets}. It is sadly impossible for this note to be
entirely knowledge free, references to the appropriate topics in more
advanced category theory have been provided but it is assumed that the
reader is familiar with category theory as it is developed
in~\citet{MacLane:98}. Any assumptions behind this that are not
explicitly noted should be considered a defect and reported to the
author.

\section{Freyd's Theorem}\label{sec:freyd}

Freyd's theorem is a well-known result in category theory which states
that any small category which is complete for all small limits must be
a poset. This is the starting point for our development because the
nonconstructive argument that is used to prove this result suggests
that it might fail in a nonclassical setting.
\begin{thm}\label{thm:freyd:freyd}
  In any small category $\Ccat$ which is complete must be a poset.
\end{thm}
\begin{proof}
  Suppose we have such a $\Ccat$. We wish to show that for any
  $A, B \in \Ccat$ that $\card{\hom(A, B)} \le 1$. Let's suppose that
  this is not the case, namely, that we have a pair of objects $A$ and
  $B$ so that $\card{\hom(A, B)} \ge 2$. Let us distinguish two
  morphisms $a \neq b \in \hom(A, B)$ for later purposes.. Since
  $\Ccat$ is small we know that the collection of all morphisms is a
  set, let us say of cardinality $\kappa$. Let us then form the
  product $C = \prod_{i \in \kappa} B$. This must exist since we have
  assumed the existence of all small limits. Now consider
  $\hom(A, C)$. We know that $\hom(A, C) \subset X$ where $X$ is
  \[
    X = \{\langle x_i \rangle_{i \in \kappa}\mid \forall i.\ x_i \in \{a, b\}\}
  \]
  However, $\card{X} = 2^\kappa$, contradicting our assumption that
  the cardinality of the set of morphisms is $\kappa$.
\end{proof}

What is especially interesting is this result is that it can be
generalized from applying to just a boolean topos, such as $\set$ to
any topos which is based on top of $\set$ with an object of
generators! In particular, we can generalize this result to any
internal category to a Grothendieck topos. This result was concisely
proven by \citet{Gubkin:10} and is restated below.
\begin{thm}\label{thm:freyd:grothendieck}
  In any category $\Ccat$ internal to a topos $\Etop$ based on $\set$
  which is complete must be a poset.
\end{thm}
\begin{proof}
  \todo{Reprove this}
\end{proof}

\section{Internal Category Theory in a Topos}\label{sec:internal}

Before continuing further, it would behoove us to take some time to
discuss and develop the theory of internal category theory to a
topos. Essentially, the idea is that \emph{normal} category theory can
be stated as simply category theory done internally to $\set$ which
opens the door to doing category theory internally to $\eff$. To begin
with, we will review the development of category theory internal to
any category with pullbacks and pay particular attention to the
question of internal limits.
\begin{defn}\label{defn:internal:internalcat}
  An internal category is a pair of objects $C_1$ and $C_0$ equipped
  with the following data.
  \begin{itemize}
  \item A pair of parallel maps $\partial_0, \partial_1 : C_1 \to C_0$
  \item A splitting for these maps $i : C_0 \to C_1$, explicitly,
    $\partial_0 \circ i = \partial_1 \circ i = 1$)
  \item Given the pullback
    \[
      \begin{tikzcd}
        C_2 \ar[r] \ar[d] & C_1 \ar[d, "\partial_1"]\\
        C_1 \ar[r, swap, "\partial_0"] & C_0
      \end{tikzcd}
    \]
    a map $m : C_2 \to C_1$.
  \end{itemize}
  Moreover, these will satisfy the following properties,
  \begin{itemize}
  \item $m \circ (m \times 1) = m \circ (1 \times m)$
  \item $\partial_0 \circ m = \partial_0 \circ \pi_1$
  \item $\partial_1 \circ m = \partial_1 \circ \pi_2$
  \item $m \circ \langle i \circ \partial_0, 1\rangle = 1$
  \item $m \circ \langle 1, i \circ \partial_1\rangle = 1$
  \end{itemize}
\end{defn}
This concept seems rather opaque at first glance, but it is in fact
just the categorization of the normal definition of category. For
instance:
\begin{example}
  Any small category is just a category internal to $\set$.
\end{example}
\begin{example}
  Given a category $\Ccat$ which is has pullbacks and local
  exponentials and a morphism $f : A \to B$ in this category, the
  category $\full(a)$ is an internal category defined as follows.
  \begin{description}
  \item[Objects] The object of objects is simply $B$
  \item[Morphisms] The object of morphisms is given by the domain of
    $\pi_2^*(f)^{\pi_1^*(f)}$, an object in $\Ccat/B \times B$. Let us
    denote this object $B_1$. We then define
    $\partial_i : B_1 \to B \times B \overset{\pi_i}{\to} B$
  \end{description}
  We then must describe the identity and composition morphisms. In
  order to construct the identity morphism, it suffices to find a
  morphism from $\Delta : B \to B \times B$ to
  $\pi_2^*(a)^{\pi_1^*(a)}$ in $\Ccat/B \times B$. Doing this will
  immediately ensure that it is indeed a section for $\partial_0$ and
  $\partial_1$. By the universal property of an exponential, this is
  equivalent to finding a morphism in
  $\hom_{\Ccat/B \times B}(\Delta \times \pi_1^*(a), \pi_2^*(a))$.
  However, examination of $\Delta \times \pi_1^*(a)$ shows that it is
  equivalent to $\Sigma_\Delta a$ since
  $\Delta^* \circ \pi_1^* \cong 1$. Therefore, we need a morphism in
  \[
    \hom_{\Ccat/B \times B}(\Sigma_\Delta a, \pi_2^*(a)) \cong
    \hom_{\Ccat/B \times B}(a, \Delta^* \pi_2^*(a)) \cong
    \hom_{\Ccat/B \times B}(a, a)
  \]
  So we simply pick the identity morphism.

  Next we perform the same operation for composition. We need a
  morphism in $\hom_{\Ccat/B \times B}(b_2, \pi_2^*(a)^{\pi_1^*(a)})$
  where $b_2 : B_2 \to B \times B$ is defined as
  $\langle \partial_0 \circ p, \partial_1 \circ p' \rangle$
  with the domain given by the pullback
  \[
    \begin{tikzcd}
      B_2 \ar[r, "p'"] \ar[d, swap, "p"] & B_1 \ar[d, "\partial_0"]\\
      B_1 \ar[r, swap, "\partial_1"] & B
    \end{tikzcd}
  \]
  In order to derive composition, we note that
  \begin{align*}
    \hom(\langle f, g \rangle, \pi_2^*(a)^{\pi_1^*(a)})
    &\cong \hom(\Sigma_{\langle f, g \rangle} 1, \pi_2^*(a)^{\pi_1^*(a)})\\
    &\cong \hom(1, \langle f, g \rangle^*(\pi_2^*(a)^{\pi_1^*(a)}))\\
    &\cong \hom(1, (\langle f, g \rangle^*\pi_2^*)(a)^{\langle f, g \rangle^*\pi_1^*(a)})\\
    &\cong \hom(1, g^*(a)^{f^*(a)})\\
    &\cong \hom(f^*(a), g^*(a))
  \end{align*}
  Therefore, we merely need to find a morphism
  \[
    m \in \hom((\delta_0 \circ p)^*(a), (\delta_1 \circ p')^*(a))
  \]
  We note that by
  $1 \in \hom(\pi_2^*(a)^{\pi_1^*(a)}, \pi_2^*(a)^{\pi_1^*(a)})$ we
  have a morphism
  $f \in \hom(\partial_0^*(a), \partial_1^*(a))$ so we can obtain
  \[
    m \triangleq p^*(f) \circ p'^*(f)
  \]
  Which typechecks because we have that
  $\partial_1 \circ p = \partial_0 \circ p'$ by the definition of
  $B_2$.
\end{example}

\section{Notions of Completeness and Their Preservation Properties}\label{sec:completeness}
\section{Orthogonal Objects and Subquotients of the Natural Number Object}\label{sec:orth}
\section{Modest Sets}\label{sec:modest}
\section{Conclusion}\label{sec:conclusion}

\bibliographystyle{plainnat}
\bibliography{bibliography}{}
\end{document}
