\documentclass[12pt]{amsart}
\usepackage{fullpage, microtype}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{natbib, hyperref}
\usepackage{tikz-cd}
\usepackage{xcolor}

\newcommand{\todo}[1]{{\color{red}{\LARGE #1}}}

\newcommand{\cat}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\topos}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\set}{\cat{Set}}
\newcommand{\eff}{\mathcal{E}\!f\!f}

\renewcommand{\epsilon}{\varepsilon}
\newcommand{\pto}[1]{\rightharpoonup}
\newcommand{\den}[1]{\llbracket #1 \rrbracket}
\newcommand{\Ccat}{\ensuremath{\mathbb{C}}}
\newcommand{\Dcat}{\ensuremath{\mathbb{D}}}
\newcommand{\Etop}{\ensuremath{\mathcal{E}}}
\newcommand{\Ftop}{\ensuremath{\mathcal{F}}}
\newcommand{\pow}[1]{\ensuremath{\mathcal{P}\left(#1\right)}}
\newcommand{\unchar}[1]{\ensuremath{\ulcorner #1 \urcorner}}
\newcommand{\card}[1]{\ensuremath{\left\vert#1\right\vert}}
\newcommand{\powfin}[1]{\ensuremath{\mathcal{P}_{fin}\left(#1\right)}}

\newcommand{\epi}{\ensuremath{\twoheadrightarrow}}
\newcommand{\mono}{\ensuremath{\rightarrowtail}}
\newcommand{\im}[1]{\ensuremath{\mathrm{Im}(#1)}}
\DeclareMathOperator{\charmap}{char}
\DeclareMathOperator{\true}{true}
\DeclareMathOperator{\sub}{Sub}
\DeclareMathOperator{\dom}{Dom}
\DeclareMathOperator{\cod}{Cod}
\DeclareMathOperator{\full}{Full}
\DeclareMathOperator{\family}{Fam}
\DeclareMathOperator{\orth}{Orth}

\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{remark}[thm]{Remark}
\newtheorem{example}[thm]{Example}
\newtheorem{defn}[thm]{Definition}

\title{Small Complete Categories in the Effective Topos}
\author{Daniel Gratzer}
\date{\today}
\begin{document}
\maketitle

\section{Introduction}\label{sec:introduction}

In this note I'd like to discuss a remarkable discovery of the 1970s:
the existence of small, complete, non-poset internal categories in the
effective topos. This is a surprising discovery not because these
subcategories are particularly exotic; in fact they are quite
natural. What makes this surprising is that no Grothendieck topos
(importantly $\set$) can contain such an internal category. Therefore,
it is a direct result of the nonclassical metatheory that $\eff$
provides that we can construct such internal categories.

These categories are in fact interesting for reasons beyond their mere
existence. They provide a method for describing naive semantics for
type theories with impredicative polymorphism, notably System F, which
would otherwise be impossible to describe. In essence, the
completeness of the internal category means that $\forall$ may be
simply interpreted as the product over the object of objects,
something that's in fact contained in the internal category since it's
closed under such limits. A more detailed description of the semantics
of System F that this provides is a subject for a future note however.

In this note we will mainly be concerned with establishing the minimum
complete theory in order to describe the internal categories of
interest and prove their completeness. This is nontrivial since even
stating what completeness is requires a fair amount of delicate
consideration. In section~\ref{sec:freyd} we will start by proving
that this work is in fact worth it; these categories don't exist in
$\set$. In sections~\ref{sec:completeness} and~\ref{sec:completeness}
some of the underlying theory behind our constructions, including a
discussion on why the right notion of subcategory to consider is in
fact, an internal category. Finally, the main thrust of the note is
developed in sections~\ref{sec:orth} and~\ref{sec:modest} where we
prove the existence of two such internal categories, the category of
objects orthogonal two $\Omega$ and the category of so-called
\emph{modest sets}. It is sadly impossible for this note to be
entirely knowledge free, references to the appropriate topics in more
advanced category theory have been provided but it is assumed that the
reader is familiar with category theory as it is developed
in~\citet{MacLane:98}. Any assumptions behind this that are not
explicitly noted should be considered a defect and reported to the
author.

\section{Freyd's Theorem}\label{sec:freyd}

Freyd's theorem is a well-known result in category theory which states
that any small category which is complete for all small limits must be
a poset. This is the starting point for our development because the
nonconstructive argument that is used to prove this result suggests
that it might fail in a nonclassical setting.
\begin{thm}\label{thm:freyd:freyd}
  In any small category $\Ccat$ which is complete must be a poset.
\end{thm}
\begin{proof}
  Suppose we have such a $\Ccat$. We wish to show that for any
  $A, B \in \Ccat$ that $\card{\hom(A, B)} \le 1$. Let's suppose that
  this is not the case, namely, that we have a pair of objects $A$ and
  $B$ so that $\card{\hom(A, B)} \ge 2$. Let us distinguish two
  morphisms $a \neq b \in \hom(A, B)$ for later purposes.. Since
  $\Ccat$ is small we know that the collection of all morphisms is a
  set, let us say of cardinality $\kappa$. Let us then form the
  product $C = \prod_{i \in \kappa} B$. This must exist since we have
  assumed the existence of all small limits. Now consider
  $\hom(A, C)$. We know that $\hom(A, C) \subset X$ where $X$ is
  \[
    X = \{\langle x_i \rangle_{i \in \kappa}\mid \forall i.\ x_i \in \{a, b\}\}
  \]
  However, $\card{X} = 2^\kappa$, contradicting our assumption that
  the cardinality of the set of morphisms is $\kappa$.
\end{proof}

What is especially interesting is this result is that it can be
generalized from applying to just a boolean topos, such as $\set$ to
any topos which is based on top of $\set$ with an object of
generators! In particular, we can generalize this result to any
internal category to a Grothendieck topos. This result was concisely
proven by \citet{Gubkin:10} and is restated below.
\begin{thm}\label{thm:freyd:grothendieck}
  In any category $\Ccat$ internal to a topos $\Etop$ based on $\set$
  which is complete must be a poset.
\end{thm}
\begin{proof}
  \todo{Reprove this}
\end{proof}

\section{Internal Category Theory in a Topos}\label{sec:internal}

Before continuing further, it would behoove us to take some time to
discuss and develop the theory of internal category theory to a
topos. Essentially, the idea is that \emph{normal} category theory can
be stated as simply category theory done internally to $\set$ which
opens the door to doing category theory internally to $\eff$. To begin
with, we will review the development of category theory internal to
any category with pullbacks and pay particular attention to the
question of internal limits.
\begin{defn}\label{defn:internal:internalcat}
  An internal category is a pair of objects $C_1$ and $C_0$ equipped
  with the following data.
  \begin{itemize}
  \item A pair of parallel maps $\partial_0, \partial_1 : C_1 \to C_0$
  \item A splitting for these maps $i : C_0 \to C_1$, explicitly,
    $\partial_0 \circ i = \partial_1 \circ i = 1$)
  \item Given the pullback
    \[
      \begin{tikzcd}
        C_2 \ar[r] \ar[d] & C_1 \ar[d, "\partial_1"]\\
        C_1 \ar[r, swap, "\partial_0"] & C_0
      \end{tikzcd}
    \]
    a map $m : C_2 \to C_1$.
  \end{itemize}
  Moreover, these will satisfy the following properties,
  \begin{itemize}
  \item $m \circ (m \times 1) = m \circ (1 \times m)$
  \item $\partial_0 \circ m = \partial_0 \circ \pi_1$
  \item $\partial_1 \circ m = \partial_1 \circ \pi_2$
  \item $m \circ \langle i \circ \partial_0, 1\rangle = 1$
  \item $m \circ \langle 1, i \circ \partial_1\rangle = 1$
  \end{itemize}
\end{defn}
This concept seems rather opaque at first glance, but it is in fact
just the categorization of the normal definition of category. For
instance:
\begin{example}
  Any small category is just a category internal to $\set$.
\end{example}
\begin{example}\label{ex:internal:full}
  Given a category $\Ccat$ which is has pullbacks and local
  exponentials and a morphism $f : A \to B$ in this category, the
  category $\full(a)$ is an internal category defined as follows.
  \begin{description}
  \item[Objects] The object of objects is simply $B$
  \item[Morphisms] The object of morphisms is given by the domain of
    $\pi_2^*(f)^{\pi_1^*(f)}$, an object in $\Ccat/B \times B$. Let us
    denote this object $B_1$. We then define
    $\partial_i : B_1 \to B \times B \overset{\pi_i}{\to} B$
  \end{description}
  We then must describe the identity and composition morphisms. In
  order to construct the identity morphism, it suffices to find a
  morphism from $\Delta : B \to B \times B$ to
  $\pi_2^*(a)^{\pi_1^*(a)}$ in $\Ccat/B \times B$. Doing this will
  immediately ensure that it is indeed a section for $\partial_0$ and
  $\partial_1$. By the universal property of an exponential, this is
  equivalent to finding a morphism in
  $\hom_{\Ccat/B \times B}(\Delta \times \pi_1^*(a), \pi_2^*(a))$.
  However, examination of $\Delta \times \pi_1^*(a)$ shows that it is
  equivalent to $\Sigma_\Delta a$ since
  $\Delta^* \circ \pi_1^* \cong 1$. Therefore, we need a morphism in
  \[
    \hom_{\Ccat/B \times B}(\Sigma_\Delta a, \pi_2^*(a)) \cong
    \hom_{\Ccat/B \times B}(a, \Delta^* \pi_2^*(a)) \cong
    \hom_{\Ccat/B \times B}(a, a)
  \]
  So we simply pick the identity morphism.

  Next we perform the same operation for composition. We need a
  morphism in $\hom_{\Ccat/B \times B}(b_2, \pi_2^*(a)^{\pi_1^*(a)})$
  where $b_2 : B_2 \to B \times B$ is defined as
  $\langle \partial_0 \circ p, \partial_1 \circ p' \rangle$
  with the domain given by the pullback
  \[
    \begin{tikzcd}
      B_2 \ar[r, "p'"] \ar[d, swap, "p"] & B_1 \ar[d, "\partial_0"]\\
      B_1 \ar[r, swap, "\partial_1"] & B
    \end{tikzcd}
  \]
  In order to derive composition, we note that
  \begin{align*}
    \hom(\langle f, g \rangle, \pi_2^*(a)^{\pi_1^*(a)})
    &\cong \hom(\Sigma_{\langle f, g \rangle} 1, \pi_2^*(a)^{\pi_1^*(a)})\\
    &\cong \hom(1, \langle f, g \rangle^*(\pi_2^*(a)^{\pi_1^*(a)}))\\
    &\cong \hom(1, (\langle f, g \rangle^*\pi_2^*)(a)^{\langle f, g \rangle^*\pi_1^*(a)})\\
    &\cong \hom(1, g^*(a)^{f^*(a)})\\
    &\cong \hom(f^*(a), g^*(a))
  \end{align*}
  Therefore, we merely need to find a morphism
  \[
    m \in \hom((\delta_0 \circ p)^*(a), (\delta_1 \circ p')^*(a))
  \]
  We note that by
  $1 \in \hom(\pi_2^*(a)^{\pi_1^*(a)}, \pi_2^*(a)^{\pi_1^*(a)})$ we
  have a morphism
  $f \in \hom(\partial_0^*(a), \partial_1^*(a))$ so we can obtain
  \[
    m \triangleq p^*(f) \circ p'^*(f)
  \]
  Which typechecks because we have that
  $\partial_1 \circ p = \partial_0 \circ p'$ by the definition of
  $B_2$.
\end{example}
It will be fruitful to develop a small amount of normal category
theory in this framework. For instance, we can define what it means to
be a poset
\begin{defn}\label{defn:internal:poset}
  An internal category is a poset if
  $\langle \partial_0, \partial_1 \rangle$ is a monomorphism.
\end{defn}
Intuitively, a category if is a poset if the function which strips
away all information from a morphism except its domain and codomain
does not lose any information. In other words, there is at most one
morphism of any given type. In order to define what it means for a
category to have limits and other universal constructions, it will be
simplest to establish a corresponding version of $\cat{Cat}$ for
internal categories: $\cat{Cat}(\Ccat)$. Then all of these
constructions can be defined by the existence of suitable
adjoints. Therefore, it is necessary to define corresponding internal
versions of a functor and natural transformation.
\begin{defn}\label{defn:internal:functor}
  An internal functor $F : C \to D$ is a pair of morphisms
  $F_0 : C_0 \to D_0$ and $F_1 : C_1 \to D_1$ so that $F_0$ and $F_1$
  commute with $i$, $m$, and $\partial_i$.
\end{defn}
\begin{defn}\label{defn:internal:naturaltrans}
  An internal natural transformation $\alpha : F \to G$ is a morphism
  $C_0 \to D_1$ so that the following diagrams commute
  \[
    \begin{tikzcd}
      &C_1 \ar[dl, swap, "{\langle \alpha \circ \partial_0, G_1 \rangle}"]
           \ar[dr, "{\langle F_1, \alpha \circ \partial_1 \rangle}"]&\\
      D_2 \ar[r, "m"] & D_1 & D_2 \ar[l, "m"]
    \end{tikzcd}
    \begin{tikzcd}
      &C_0 \ar[d, "\alpha"] \ar[dl, swap, "F_0"] \ar[dr, "G_0"]&\\
      D_0 & D_1 \ar[l, "\partial_0"] \ar[r, swap, "\partial_1"] & D_0
    \end{tikzcd}
  \]
\end{defn}
The diagram on the right being that the arrows produced by the
natural transformation have the right type. The diagram on the left
is simply an expression of naturality.
\begin{thm}
  $\cat{Cat}(\Ccat)$ is a 2-category with internal categories,
  functors, and natural transformations.
\end{thm}
\begin{proof}
  \todo{Probably should prove some parts of this}
\end{proof}
Having fleshed out that this forms a 2-category, we know that it
automatically inherits the notion of adjoint functors and therefore,
equivalences that are describable in all 2-categories. We will
devote greater care to the question of equivalences in the next
section, but for now we will take the opportunity to make some obvious
definitions.

\begin{thm}\label{thm:internal:2categorical}
  The 2-category $\cat{cat}(\Ccat)$ has finite (co)limits and
  exponentials when the ambient category does.
\end{thm}
\begin{proof}
  \todo{Routine proof, but should spell out}
\end{proof}

As a final construction, we will concern ourselves with the conversion
of an internal category to a particular fibration on the
category. This will be essential for the remainder of our technical
development because it is much more convenient to prove the
completeness of fibrations rather than work with cumbersome diagrams
for internal categories. Furthermore, the fibration, or
\emph{externalization}, of an internal category shares many essential
properties with its internal category.
\begin{defn}\label{defn:internal:externalization}
  The \emph{externalization} of an internal category $C \in \Ccat$ is
  a functor $\family(C) : \cat{Fam}(C) \to \Ccat$ where
  \begin{description}
  \item[Objects] Objects of $\cat{Fam}(C)$ are maps $I \to C_0$ in
    $\Ccat$.
  \item[Morphisms] Morphisms of $\cat{Fam}(C)(f, g)$ are pairs of maps
    $(\alpha, h)$ where $\alpha : \dom(f) \to \dom(g)$ and a map $h :
    I \to C_1$ so the following commutes
    \[
      \begin{tikzcd}
        I \ar[dd, swap, "f"] \ar[rd, "h"] \ar[rr, "\alpha"] && J \ar[dd, "g"]\\
        & C_1 \ar[dl, swap, "\partial_0"] \ar[dr, "\partial_1"] &\\
        C_0 && C_0
      \end{tikzcd}
    \]
    In other words, it is an $I$-indexed collection of morphisms which
    map one family of $C$ objects onto the new family.
  \end{description}
\end{defn}

\begin{thm}\label{thm:internal:externalization}
  $\family(C)$ is a split fibration.
\end{thm}
\begin{proof}
  \todo{Should prove this in full}
\end{proof}

\section{Notions of Completeness and Their Preservation Properties}\label{sec:completeness}

In this section we investigate two main questions. The first is how to
define completeness in the context of an internal category. In order
to provide a satisfactory answer, we will want this notion of
completeness to be preserved and reflected by $\family(-)$, so that we
can continue to work with fibrations. Next, we will need to see what
notions equivalences preserve completeness. In particular, many of our
categories will provide only a weak (but sufficient!) notion of
completeness and it is not obvious that it will be preserved by only
internal equivalences.

To begin with, internal categories, like normal categories, give us a
simplistic method of defining finite limits. For instance, products
may be defined as follows.
\begin{defn}\label{defn:completeness:products}
  An internal category $C$ is said to have products if
  $\Delta : C \to C \times C$ has a right adjoint.
\end{defn}
Similarly, the existence of equalizers can be defined by asserting the
existence of a right adjoint of the functor
$C \to C^{\rightrightarrows}$, the internal category of parallel
arrows. The reader may consult~\citet{Jacobs:99} for a more detailed
account of this in Chapter 7. This, moreover, can be seen to be the
right notion of finite limit for externalizations as well.
\begin{thm}\label{defn:completeness:finlimexternalization}
  $\family(C)$ has fiberwise finite limits if and only if $C$ has
  finite limits.
\end{thm}
\begin{proof}
  \todo{Flesh me out!}
\end{proof}
Often times the existence of such an adjoint is too strong a
condition. Working internally to a topos, another reasonable approach
would be to state the existence of a limit cone using the internal
language. That is for example,
\begin{defn}\label{defn:completeness:weakproducts}
  An internal category $C$ is said to have weak products if there is
  $Z$ has an epi onto $1$ where $Z$ is defined as
  \[
    Z \triangleq \forall a, b \in C_0.\ \exists c, \pi_1, \pi_2.
    \ \forall d.\ (\exists f_1 f_2.\ f_1 : d \to a \mathrel{\wedge} f_2 : d \to b) \implies
    \exists! g.\ g : c \to d \mathrel{\wedge} \pi_i \circ g = f_i\}
  \]
  Where the proposition
  $f : A \to B \triangleq \partial_0(f) = A \mathrel{\wedge} \partial_1(f) = B$.
\end{defn}
These definitions can be shown to coincide if and only if the topos
satisfies the axiom of choice\footnote{I'm 80\% sure at least} but
since the effective topos does not, we are then left with two
different notions of finite limits. The one based on the existence of
adjoints essentially asserts the global existence of a limit cone and
will be called the \emph{strong} notion of finite limits. The one
based on the internal language is implied by this and is called the
\emph{weak} or \emph{local} version of a finite limit.

We can take this idea to its natural completion and define (weak)
completeness for all small limits.
\begin{defn}\label{defn:complete:complete}
  An internal category $C$ is strongly complete if for all internal
  categories $D$ the diagonal functor $C \to C^D$ has a right
  adjoint.
\end{defn}
\begin{defn}\label{defn:complete:weakcompletebroken}
  An internal category $C$ is weakly complete if for all internal
  categories $D$ the formula specifying an adjoint to the the diagonal
  functor $C \to C^D$ specifies an object with an epi onto $1$.
\end{defn}
We now wish to check that this definition is useful, that is, that it
is preserved and reflected by equivalences. In order to do this, of
course, we must define a notion of equivalence. Again, there are two
reasonable notions. We can assert either the existence of a
pseudo-inverse globally, that is, in the ambient logic, or merely the
existence internally. The former notion is sufficient to determine an
equivalence relation, but the latter does not. It does not, for
instance, satisfy symmetry because of the potential difference between
internal and external existence. Therefore, we need to characterize
the completion of weak equivalences to an equivalence relation.
\begin{defn}\label{defn:complete:weakequivalence}
  Two internal categories, $C$ and $D$, are said to be weakly
  equivalent if there is an third internal category, $E$, so that
  there is a pair weak equivalences, $F : E \to C$ and $G : E \to D$.
\end{defn}
We wish to generalize the notion of equivalences of internal
categories to equivalences of their fibrations so that we can work
with fibrations in later technical developments. This is done in two
steps, first of all
\begin{thm}\label{thm:complete:equivalencelifts}
  An equivalence of internal categories lifts to a fibered equivalence
  of their externalizations.
\end{thm}
\begin{proof}
  \todo{Should be a straightforward check}
\end{proof}
Weak equivalences are more difficult because there isn't a
corresponding notion of existential quantifier at in the metalogic
which corresponds to internal existence. In order to deal with this,
we draw inspiration from Kripke-Joyal semantics where $\exists$ is
modelled with a change of base. \todo{elaborate}
\begin{thm}\label{thm:complete:weakequivalencelifts}
  $F : C \to D$ is a weak equivalence if it lifts to $\family(F)$ so
  that $\family(F)$ is cartesian, full, faithful, and for any $X$ in
  $\cat{Fam}(D)$ there is a $Y \in \cat{Fam}(C)$ so that
  there is an $\alpha \in \hom(\family(D)(\family(F)(Y)), X)$. so that
  $\alpha^*(X) \cong \family(F)(Y)$.
\end{thm}
\begin{proof}
  \todo{This is weird but not too bad}
\end{proof}
Now we turn to the fatal flaw in
Definition~\ref{defn:complete:weakcompletebroken}.
\begin{thm}\label{thm:complete:weakcompletenotpreserved}
  Weak completeness is not preserved by weak equivalences.
\end{thm}
\begin{proof}
  Sketch the reason why this is true.
\end{proof}
This is a major issue, in category theory it is after all a cardinal
sin to not be preserved by isomorphism or equivalence. In this case,
we are in trouble because we will wish to establish the completeness
of one internal category and transfer this to more convenient
categories for semantics. In order to handle this, we will strengthen
our notion of weak completeness to \emph{indexed} diagrams. An indexed
diagram is given in the usual category theoretic style, as a functor
from an internal category in $\Ccat/I$ into $I^*(C)$. Therefore, our
definition of (weak) completeness is simply that an internal category
is (weakly) complete by the previous definition in each slice.
\begin{thm}\label{thm:complete:preservation}
  The following hold
  \begin{enumerate}
  \item Strong equivalences preserve and reflect both strong and weak
    completeness
  \item Weak equivalences preserve and reflect weak completeness
  \end{enumerate}
\end{thm}
\begin{proof}
  \todo{This is tricky but important}
\end{proof}
As a final observation, this notion of completeness has a pleasant
characterization at the level of fibrations.
\begin{thm}\label{thm:complete:completefibration}
  The following hold
  \begin{itemize}
  \item $C$ is complete if $\family(C)$ has fiberwise finite limits and a
    right adjoint to reindexing.
  \item $C$ is weakly complete if $\family(C)$ if given a finite
    diagram in the fiber over $I$, there is a $K \epi I$ so that the
    reindexing of the diagram has a limit over $K$. Similarly, for
    each $u : I \to J$ there is a $e : J \epi K$ so that $(eu)^*$ has
    a right adjoint.
  \end{itemize}
  Furthermore, (weak) equivalences of fibration preserve (weak)
  completeness.
\end{thm}
\begin{proof}
  \todo{Really tricky but very important}
\end{proof}
At this point we have developed all the theory that we need to being
our investigation of what small complete categories exist in the
effective topos.

\section{Orthogonal Objects and Subquotients of the Object of Realizers}\label{sec:orth}

The first small complete category we will be examining is the one
determined by partial equivalences relations on the object of
realizers (in the $\eff$, the natural number object). Our methodology
for establishing completeness will be the following.
\begin{itemize}
\item First we will concretely define the internal category we're
  studying
\item Second, we will prove it to be weakly equivalent when
  externalized to the full subfibration of $\cod$ given by arrows
  orthogonal to $\Omega$
\item We shall show then that this subfibration is strongly complete.
\end{itemize}
All of these stepped when chained together are sufficient to give us
the weak completeness of our internal category. The key insight here
is the final step. We can, after all, define the internal category
that we're working with in $\set$. We can certainly define the
complete subfibration of arrows orthogonal to $\Omega$. In $\set$,
however, these fibrations will not be even weakly
equivalent. Unsurprisingly then, a great deal of our reasoning may be
carried out in any topos and it is only this final step which should
rely on the particulars of a realizability topos.

To begin with, the internal category that we'll be working with has as
the object of objects,
\[
  Q_0 = \{R \subseteq \pow{N} \mid (\forall X \in F.\ \exists x.\ x \in F)
  \mathrel{\wedge}
  (\forall X, Y \in F.\ (\exists x.\ x \in X \mathrel{\wedge} x \in Y) \implies X = Y)\}
\]
That is, the object of quotients of subsets of $N$. We can
equivalently define this as
\[
  Q_0 = \{R : \Omega^{N \times N} \mid ``R \text{ is transitive and symmetric.}"\}
\]
The isomorphism of course is the functional relation sending $F$ to
the PER where an element is identified with its equivalence
class. Next, consider the restriction of
$\in : X \times \pow{X} \to \Omega$ to $Q_0$. This situation is given
by the pullback diagram
\[
  \begin{tikzcd}
    Q \ar[d, "u"] \ar[r] & {\{(x, y) \mid x \in y\}} \ar[d, "\unchar{\in}"]\\
     \pow{\pow{N}} \times Q_0 \ar[r, rightarrowtail] & \pow{\pow{N}} \times \pow{\pow{\pow{N}}}
  \end{tikzcd}
\]
Then we have a map $Q \to Q_0$ given by $\pi_2 \circ u$. Let us then
consider $\full(\pi_2 \circ u)$ (recalling
Example~\ref{ex:internal:full}). To grasp this category intuitively,
remember that a global object is simply an equivalence relation on a
subset of $N$ and a global morphism, $f : S \to T$ maps equivalence
classes of $S$ to equivalences classes of $T$. Thus we have
successfully internalized subquotients of $N$. Our goal will be show
that this internal category is weakly complete. In order to do this,
we will switch gears entirely and begin to work with orthogonal
morphisms.
\begin{defn}\label{defn:orth:orth}
  We say that a morphism $f : A \to B$ is orthogonal to an object $C$
  if every commuting square has a unique diagonal\footnote{The
    observant reader will note that this is simply the statement that
    $!_{I^*(C)}$ is orthogonal to $!_{f}$ in $\eff/I$}
  \[
    \begin{tikzcd}
      B \times C \ar[d, swap, "\pi_1"] \ar[r] & A \ar[d, "f"]\\
      B \ar[r, equals] \ar[ur, dashed] & B
    \end{tikzcd}
  \]
\end{defn}
Let us define $\orth(A)$ to be the collection of indexed families
orthogonal to $A$. We first observe the following elementary fact
\begin{thm}\label{thm:orth:orthfibration}
  $\orth(A)$ is a complete subfibration of $\cod$
\end{thm}
\begin{proof}
  \todo{Essentially this means showing that products and equalizers
    preserve orthogonality, $\Pi$ restricts, and pullbacks preserve
    orthogonality}
\end{proof}
We will now spend a bit more time establishing properties related
purely to orthogonal objects so that we can characterize them more
concisely in our case.
\begin{lem}\label{lem:orth:orthsubobjects}
  If $A \epi 1$ and then $\orth(A)$ is closed under subobjects.
\end{lem}
\begin{proof}
  Suppose we have some $f : X \to I$ and $f' : X' \to I$ so that there
  is an $m : f' \mono f$. We wish to show that if $f$ is orthogonal to
  $A$ than so is $f'$. Let us localize our proof to $\eff/I$. It is
  now sufficient to show that $f'^{I^*(A)} \cong f'$ where we have
  assumed that $f^{I^*(A)} \cong f$. For this, we note that
  $f \to f^{I^*(A)}$ is a mono since $I^*(A) \epi 1$ holds. This gives
  us that the following is a pullback
  \[
    \begin{tikzcd}
      f' \ar[d, rightarrowtail] \ar[r, rightarrowtail] & {f'^{I^*(A)}} \ar[d, rightarrowtail, "m^{I^*(A)}"]\\
      f \ar[r, rightarrowtail, swap, "m'"] & {f^{I^*(A)}}
    \end{tikzcd}
  \]
  Now since the bottom arrow is an iso, so too is the top and we're
  done. In order to show this is a pullback we just have to show that
  if we have $x \in f$ and $\lambda y. z \in f'^{I^*(A)}$ so that
  $m^*(\lambda y. z) = \lambda y. x$ we then have that
  $\lambda y. m(z(y)) = \lambda y. x$ so we have that for all $y$,
  $m(z(y)) = x$ so this pair uniquely corresponds to a $z \in f'$ as
  required.
\end{proof}
We now turn to recharacterizing orthogonality in a slightly different
way that will allow us to prove a number of important closure
theorems.
\begin{lem}\label{lem:orth:orthpushout}
  In order to show that $f : X \to I$ is orthogonal to $A \epi 1$ if
  and only if that there is an $\iota$
  \[
    \begin{tikzcd}
      f^{I^*(A)} \times_I I^*(A) \ar[r, "\pi_1"] \ar[d, "ev"] & f^{I^*(A)} \ar[d, "\iota"]\\
      f \ar[r, equals] & f
    \end{tikzcd}
  \]
\end{lem}
\begin{proof}
  The only if direction is trivial because $f$ being orthogonal to $A$
  specifically implies that $\iota : f^{I^*(A)} \cong f$ must exist
  and such a map obviously forms a commutative square. For the if
  direction, if $\iota$ exists then it is clear that it is a right
  identity to the diagonal $f \to f^{I^*(A)}$ which is monotone since
  $A \epi 1$ giving us that $f \to f^{I^*(A)}$ is an iso as required.
\end{proof}
\begin{cor}\label{lem:orth:orthpushout2}
  The previous lemma can be stated as the following statement if the
  following two maps commute.
  \[
    \begin{tikzcd}
      {f^{I^*(A)} \times_I I^*(A)^2} \ar[r] &
      {f^{I^*(A)} \times_I I^*(A) \times_I I^*(A)} \ar[r, shift left=0.2em] \ar[r, shift right=0.2em] &
      {f^{I^*(A)} \times_I I^*(A)} \ar[r] &
      f
    \end{tikzcd}
  \]
\end{cor}
\begin{proof}
  \todo{Should be a simple elaboration of pushout conditions}
\end{proof}
In particular, we really wish for a theorem to characterize when
$\orth(A)$ is the same as $\orth(B)$ for some $A$ and $B$. This is
because the object $\Omega$ in $\eff$ is somewhat ungainly to work
with. It would be much more convenient if we could switch to studying
simpler objects (it will turn out that quotients of $\neg\neg$-sheaves
suffice).
\begin{lem}\label{lem:orth:orthequiv}
  If $B \epi A \epi 1$ so that $2 \to A$ inducing an epimorphism
  $B^A \epi B^2$ by composition then $\orth(A)$ is equal to
  $\orth(B)$.
\end{lem}
\begin{proof}
  First, we wish to show that if $f : X \to I$ is $B$-orthogonal than
  it is $A$-orthogonal. Suppose we have the following commutative diagram
  \[
    \begin{tikzcd}
      I^*(A) \ar[r, "g"] \ar[d] & f \ar[d]\\
      1 \ar[r, equals] & 1
    \end{tikzcd}
  \]
  We can rewrite this to
  \[
    \begin{tikzcd}
      I^*(B) \ar[d] \ar[r, twoheadrightarrow] &I^*(A) \ar[r, "g"] \ar[d] & f \ar[d]\\
      1 \ar[r, equals] \ar[urr, dashed, "g'"] &1 \ar[r, equals] & 1
    \end{tikzcd}
  \]
  And since $I^*(B) \epi I^*(A)$ we have that $g' \circ ! = g$ as well
  so we're done.

  Now instead suppose that $f : X \to I$ is $A$-orthogonal, we now
  wish to show that it is $B$-orthogonal. We note that
  \[
    \begin{tikzcd}
      {f^{I^*(B)} \times_I I^*(B)^{I^*(A)}} \ar[r] \ar[d, twoheadrightarrow] & f^{I^*(A)} \ar[d, "\iota^{-1}"]\\
      {f^{I^*(B)} \times_I I^*(B)^2} \ar[r, shift left=0.2em] \ar[r, shift right=0.2em] & f\\
    \end{tikzcd}
  \]
  Now we can conclude that the bottom two arrows are equal because the
  left arrow is epi and so applying
  Lemma~\ref{lem:orth:orthpushout2} gives us the desired conclusion.
\end{proof}

\section{Modest Sets}\label{sec:modest}
\section{Conclusion}\label{sec:conclusion}

\bibliographystyle{plain}
\bibliography{bibliography}{}
\end{document}
